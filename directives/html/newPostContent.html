<md-dialog id="new_post_dialog" ng-style="{'background-color': '#' + Post.Class.Color}">
   <md-dialog-content class="new_post_dialog_scroll">
      <md-toolbar id="dialog_header" class="post-card-header" ng-class="{'no-link':Post.Type == 'NoLink','md-whiteframe-3dp': (operation == 'view' && Post.Link == '' && newPostScroll > 0) || (operation != 'view' && newPostScroll > 139)}" md-ink-ripple="{{Post.Link != '' && operation == 'view'}}"
         ng-click="openLink(Post.Link)" ng-style="{'height': ((operation == 'view' && Post.Link == '') ? (60):(200-newPostScroll)) + 'px'}">
         <img ng-src="{{Post.PreviewImage}}" id="header_image" ng-class="{'post-card-image':operation == 'view'}"></img>
         <div class="image-gradient-overlay new-post-img-gradient">
            <div id="header_title" style="opacity: 0" class="gradient-overlay-metadata metadata-regular">
               <h5 style="margin: 0">{{Post.Title}}</h5>
               <span style="font-weight:700; font-size:14px"><md-icon class="small-icon" style="color:white">people</md-icon> {{Post.Class.Name || 'No class'}}</span>
               <span ng-hide="Post.Tags.length < 1"><md-icon class="small-icon" style="color:white">style</md-icon>{{Post.Tags.join(', ')}}</span>
            </div>
            <div class="gradient-overlay-metadata metadata-regular" ng-hide="operation != 'view'">
               <span ng-hide="Post.Class.Name == null"><md-icon>people</md-icon> {{Post.Class.Name}}</span>
               <span><md-icon>event</md-icon> {{Post.CreationDate | date : "mm/dd/yyyy"}}</span>
            </div>
            <div class="gradient-overlay-metadata metadata-link" style="font-size:18px" ng-hide="Post.Link == '' || Post.Type == 'gDrive' || operation != 'view'">
               <span><md-icon>language</md-icon> {{removeHttp(Post.Link)}}</span>
            </div>
            <div class="md-chips gradient-overlay-metadata" style="position:absolute; padding: 0 40px 0 8px" ng-class="{'metadata-link': operation == 'view'}" ng-hide="Post.Type != 'gDrive'">
               <md-chip>
                  <div class="md-chip-content">
                     <img ng-src="{{Post.AttachmentIcon}}" style="margin-right:4px"></img>
                     <span>{{Post.AttachmentName}}</span>
                     <button class="md-chip-remove" style="margin-right:-10px" ng-click="clearLink()">
                        <md-icon style="color:rgb(66,66,66)">close</md-icon>
                     </button>
                  </div>
               </md-chip>
            </div>
            <div id="header_link_input_container" class="gradient-overlay-metadata" ng-hide="operation == 'view'">
               <md-input-container id="header_link_input" md-no-float ng-hide="Post.Type == 'gDrive'">
                  <input ng-model="Post.Link" style="color:white" placeholder="http://" type="text">
               </md-input-container>
               <md-menu md-position-mode="target-right target" class="attach-menu">
                  <md-button ng-click="$mdOpenMenu($event)" class="md-icon-button" style="margin:0">
                     <md-icon md-menu-origin style="font-size: 24px">attach_file</md-icon>
                  </md-button>
                  <md-menu-content>
                     <md-menu-item>
                        <md-button ng-click="::showPicker('Upload', true, 'update')"><span flex>Upload file</span>
                           <md-icon style="margin: auto 0 auto 16px">file_upload</md-icon>
                        </md-button>
                     </md-menu-item>
                     <md-menu-item>
                        <md-button ng-click="::showPicker('Drive', true, 'update')"><span flex>Attatch drive file</span><img md-menu-align-target class="unselectable" style="width:22px; height:22px; float:right; margin: auto 0 auto 16px; opacity: 0.54;" src="images/drive_icon.svg"></md-button>
                     </md-menu-item>
                  </md-menu-content>
               </md-menu>
            </div>
         </div>
         <md-progress-linear class="link-loading" md-mode="indeterminate" ng-disabled="!previewLoading"></md-progress-linear>
      </md-toolbar>
      <div id="new_post_content" ng-class="{'small-margin': Post.Type == 'NoLink' && operation == 'view'}">
               {{Post.Class}}
         <div flex layout="row">
            <md-select ng-model="Post.Class" placeholder="Class" class="md-no-underline" id="class_dropdown_button" required>
               <md-option value='{Name:{{searchPlaceholder}},Catagory:"No",Color:"ff00ff"}'>Axe</md-option>
               <md-option value="{'Catagory':'Other', 'Name':'Other1', 'Color':'#ffffff'}">Sword</md-option>
               <md-option value="{'Catagory':'Other', 'Name':'Other23', 'Color':'#ffffff'}">pen</md-option>
               <md-option value="{'Catagory':'Other', 'Name':'Other3', 'Color':'#ffffff'}">Pencil</md-option>
            </md-select>
            <div style="width:6px" ng-show="operation === 'view'"></div>
            <md-chips ng-model="Post.Tags" flex md-separator-keys="[32,188,13]" ng-hide="operation === 'view' && Post.Tags.length === 0" readonly="operation === 'view'">
               <input type="text" placeholder="Add a tag">
            </md-chips>
         </div>
         <div class="md-dialog-content">
            <input ng-model="Post.Title" ng-readonly="operation === 'view'" class="newPostTitle md-title" placeholder="Title" md-autofocus>
            <p class="post-card-creator md-subhead" style="margin:0" ng-hide="::Post.Creator.Name == undefined || Post.Creator.Name == myInfo.Name"><span>By {{::Post.Creator.Name}}</span><span style="float:right">(<md-icon class="small-icon">school</md-icon> {{::Post.Creator.ClassOf}})</span></p>
            <div contenteditable="{{operation != 'view'}}" ng-model="Post.Description" class="newPostBody"></div>
         </div>
      </div>
   </md-dialog-content>
   <md-dialog-actions ng-hide="operation === 'view'" layout="row" style="align-items: center;">
      <md-button id="New_Post_Submit" ng-click="isReadyToSubmit()" ng-disabled="previewLoading" class="md-raised">Save</md-button>
      <md-button class="text-formating-button md-icon-button " style="margin: 0 -6px 0 0; padding: 0;">
         <md-icon style="font-size:18px; line-height: 24px;">format_bold</md-icon>
      </md-button>
      <md-button class="text-formating-button md-icon-button " style="margin: 0 -6px 0 0; padding: 0;">
         <md-icon style="font-size:18px; line-height: 24px;">format_italic</md-icon>
      </md-button>
      <md-button class="text-formating-button md-icon-button " style="margin: 0 -6px 0 0; padding: 0;">
         <md-icon style="font-size:18px; line-height: 24px;">format_underline</md-icon>
      </md-button>
      <md-button class="md-icon-button text-format-button" style="margin: 0 -6px 0 0; padding: 0;">
         <md-icon style="font-size:18px;line-height: 24px;">format_list_bulleted</md-icon>
      </md-button>
      <span flex></span>
      <md-button class="md-icon-button text-format-button hover_black" style="margin-right:0px;" ng-click="closeDialog()">
         <md-icon ng-show="operation == 'new'" style="font-size:26px; line-height: 25px">delete</md-icon>
         <md-icon ng-hide="operation == 'new'" style="font-size:26px; line-height: 25px">close</md-icon>
      </md-button>
   </md-dialog-actions>
   <md-dialog-actions ng-show="operation === 'view'" layout="row" style="align-items: center;">
      <md-button id="like_thumb_button" aria-label="Like" ng-click="likePost(Post)">
         <span class="like-counter">{{Post.Likes.length}}</span>
         <md-icon ng-class="{'md-accent' : Post.userLiked}" style="margin-top: -8px">thumb_up</md-icon>
      </md-button>
      <md-button class="md-icon-button" area-label="Flag" ng-click="::flagPost(Post)" ng-hide="Post.Creator.Email == myInfo.Email && Post.Flagged == false">
         <md-icon ng-class="{'md-warn' : Post.Flagged == true}">flag</md-icon>
      </md-button>
      <md-button class="md-icon-button" ng-click="operation = 'update'">
         <md-icon>edit</md-icon>
      </md-button>
      <md-button class="md-icon-button" ng-click="::confirmDelete(Post,$index)">
         <md-icon>delete</md-icon>
      </md-button>
      <md-button class="md-icon-button" ng-show="devMode" ng-click="::logPostToConsole(Post,$index)">
         <md-icon>edit</md-icon>Console Log Post</md-button>
      <span flex></span>
      <md-button class="md-icon-button text-format-button hover_black" style="margin-right:0px;" ng-click="closeDialog()">
         <md-icon style="font-size:26px; line-height: 25px">close</md-icon>
      </md-button>
   </md-dialog-actions>
</md-dialog>
