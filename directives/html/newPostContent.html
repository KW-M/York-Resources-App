<md-dialog id="new_post_dialog" ng-style="{'background-color': Post.Class.Color}">
   <md-dialog-content class="new_post_dialog_scroll">
      <div id="dialog_header" ng-class="{ 'no-link' : Post.Type === 'noLink' }">
         <img ng-src="{{Post.PreviewImage}}" id="header_image"></img>
         <div class="new-post-img-gradient">
            <div id="header_title" style="opacity: 0" class="metadata-regular">
               <h5 style="margin: 0">{{Post.Title}}</h5>
               <span style="font-weight:700; font-size:14px"><md-icon class="small-icon" style="color:white">people</md-icon> {{Post.Class.Name || 'No class'}}</span>
               <span ng-hide="Post.Tags.length < 1"><md-icon class="small-icon" style="color:white">style</md-icon>{{Post.Tags.join(', ')}}</span>
            </div>
            <div class="metadata-regular" ng-hide="operation != 'view'">
               <span ng-hide="Post.Class.Name == null"><md-icon>people</md-icon> {{Post.Class.Name}}</span>
               <span><md-icon>event</md-icon> {{Post.CreationDate | date : "mm/dd/yyyy"}}</span>
            </div>
            <div ng-hide="Post.Tags.length < 1 || operation != 'view'" class="metadata-regular">
               <span><md-icon>style</md-icon> {{Post.Tags.join(', ')}}</span>
            </div>
            <div ng-hide="Post.Link == '' || Post.Type == 'gDrive'" class="metadata-link" style="font-size:18px">
               <span><md-icon>language</md-icon> {{removeHttp(Post.Link)}}</span>
            </div>
            <div class="md-chips" ng-class="{'metadata-link': true}" ng-hide="Post.Type != 'gDrive'" style="width:100%">
               <md-chip>
                  <div class="md-chip-content" style="padding-left:0">
                     <img ng-src="{{Post.AttachmentIcon}}" style="top: 7.5px;position: absolute;"></img>
                     <span style="margin-left:20px">{{Post.AttachmentName}}</span>
                  </div>
               </md-chip>
            </div>
            <div ng-hide="operation == 'view'" id="header_link_input">
               <md-input-container md-no-float id="new_post_link_input" ng-hide="Post.Type == 'gDrive'">
                  <input id="newPostLinkInputTxt" ng-model="Post.Link" style="color:white" placeholder="http://" type="text">
               </md-input-container>
               <md-menu md-position-mode="target-right target" class="attach-menu">
                  <md-button ng-click="$mdOpenMenu($event)" class="md-icon-button" style="margin:0">
                     <md-icon md-menu-origin>attach_file</md-icon>
                  </md-button>
                  <md-menu-content>
                     <md-menu-item>
                        <md-button ng-click="::showPicker('Upload', true, 'update')"><span flex>Upload file</span>
                           <md-icon style="margin: auto 0 auto 16px">file_upload</md-icon>
                        </md-button>
                     </md-menu-item>
                     <md-menu-item>
                        <md-button ng-click="::showPicker('Drive', true, 'update')"><span flex>Attatch drive file</span><img md-menu-align-target class="unselectable" style="width:22px; height:22px; float:right; margin: auto 0 auto 16px; opacity: 0.54;" src="images/drive_icon.svg"></md-button>
                     </md-menu-item>
                  </md-menu-content>
               </md-menu>
            </div>
            <div ng-show="operation === 'view'" id="header_metadata">
               <p class="post-card-link-text" ng-hide="::Post.Link == ''">
                  <md-icon style="color:White; font-size: 16px;" class="small-icon">language</md-icon>
                  <span> {{::Post.Link}}</span>
               </p>
               <div class="post-card-metadata-text">
                  <!--<p style="margin: 4px 0 0 0;">-->
                  <md-icon class="small-icon" style="color:white">event</md-icon><span style="margin-right:10px; font-weight:700; font-size:14px"> {{::Post.CreationDate | date : "m/dd/yyyy"}}</span>
                  <md-icon class="small-icon" style="color:white">people</md-icon><span style="font-weight:700; font-size:14px"> {{::Post.Class.Name}}</span>
                  <!--</p>-->
               </div>
            </div>
         </div>
         <md-progress-linear class="link-loading" md-mode="indeterminate" ng-disabled="!previewLoading"></md-progress-linear>
      </div>
      <div id="new_post_content" style="margin-top:200px">
         <div flex layout="row">
            <md-select ng-model-options="{trackBy: '$value.Name'}" class="md-no-underline md-button" ng-model="Post.Class" placeholder="Class" ng-hide="operation === 'view'" md-on-close="clearText(classSelectSearch)" style="margin: 4px 4px;font-size:16px;font-style:normal;font-variant:normal;font-weight:normal;">
               <!--<md-select-header class="classSelectSearchbox">-->
               <!--   <input ng-model="classSelectSearch" id="class_select_input" type="Search" placeholder="Search for a class.." class="md-text">-->
               <!--</md-select-header>-->
               <md-option value="{'Catagory':'Other', 'Name':'Memes', 'Color':'#ffffff'}" class="rainbow" ng-show="queryParams.classpath == 'meme' || devMode == true">
                  Memes
               </md-option>
               <md-option value="{'Catagory':'Other', 'Name':'Other', 'Color':'#ffffff'}">
                  Other / Not associated
               </md-option>
               <md-optgroup ng-repeat="Catagory in classList" label="{{Catagory.Catagory}}">
                  <md-option ng-repeat="Name in Catagory.Classes" ng-value="{'Catagory':Catagory.Catagory, 'Name':Name, 'Color':Catagory.Color}">
                     {{Name}}
                  </md-option>
               </md-optgroup>
            </md-select>
            <div style="width:6px" ng-show="operation === 'view'"></div>
            <md-chips ng-model="Post.Tags" flex md-separator-keys="[32,188,13]" ng-hide="operation === 'view' && Post.Tags.length === 0" readonly="operation === 'view'">
               <input type="text" placeholder="Add a tag">
            </md-chips>
         </div>
         <div class="md-dialog-content">
            <input ng-model="Post.Title" ng-readonly="operation === 'view'" class="newPostTitle md-title" placeholder="Title" md-autofocus>
            <div contenteditable="{{operation != 'view'}}" ng-model="Post.Description" class="newPostBody"></div>
         </div>
      </div>
   </md-dialog-content>
   <md-dialog-actions ng-hide="operation === 'view'" layout="row" style="align-items: center;">
      <md-button id="New_Post_Submit" ng-click="isReadyToSubmit()" ng-disabled="previewLoading" class="md-raised">Save</md-button>
      <md-button class="text-formating-button md-icon-button " style="margin: 0 -6px 0 0; padding: 0;">
         <md-icon style="font-size:18px; line-height: 24px;">format_bold</md-icon>
      </md-button>
      <md-button class="text-formating-button md-icon-button " style="margin: 0 -6px 0 0; padding: 0;">
         <md-icon style="font-size:18px; line-height: 24px;">format_italic</md-icon>
      </md-button>
      <md-button class="text-formating-button md-icon-button " style="margin: 0 -6px 0 0; padding: 0;">
         <md-icon style="font-size:18px; line-height: 24px;">format_underline</md-icon>
      </md-button>
      <md-button class="md-icon-button text-format-button" style="margin: 0 -6px 0 0; padding: 0;">
         <md-icon style="font-size:18px;line-height: 24px;">format_list_bulleted</md-icon>
      </md-button>
      <span flex></span>
      <md-button class="md-icon-button text-format-button hover_black" style="margin-right:0px;" ng-click="closeDialog()">
         <md-icon ng-show="operation == 'new'" style="font-size:26px; line-height: 25px">delete</md-icon>
         <md-icon ng-hide="operation == 'new'" style="font-size:26px; line-height: 25px">close</md-icon>
      </md-button>
   </md-dialog-actions>
   <md-dialog-actions ng-show="operation === 'view'" layout="row" style="align-items: center;">
      <md-button id="like_thumb_button" aria-label="Like" ng-click="likePost(Post)">
         <span class="like-counter">{{Post.Likes.length}}</span>
         <md-icon ng-class="{'md-accent' : Post.userLiked}" style="margin-top: -8px">thumb_up</md-icon>
      </md-button>
      <md-button class="md-icon-button" area-label="Flag" ng-click="::flagPost(Post)" ng-hide="Post.Creator.Email == myInfo.Email && Post.Flagged == false">
         <md-icon ng-class="{'md-warn' : Post.Flagged == true}">flag</md-icon>
      </md-button>
      <md-button class="md-icon-button" ng-click="operation = 'update'">
         <md-icon>edit</md-icon>
      </md-button>
      <md-button class="md-icon-button" ng-click="::confirmDelete(Post,$index)">
         <md-icon>delete</md-icon>
      </md-button>
      <md-button class="md-icon-button" ng-show="devMode" ng-click="::logPostToConsole(Post,$index)">
         <md-icon>edit</md-icon>Console Log Post</md-button>
      <span flex></span>
      <md-button class="md-icon-button text-format-button hover_black" style="margin-right:0px;" ng-click="closeDialog()">
         <md-icon style="font-size:26px; line-height: 25px">close</md-icon>
      </md-button>
   </md-dialog-actions>
</md-dialog>
